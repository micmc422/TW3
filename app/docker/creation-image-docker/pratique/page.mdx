---
description: "Nous allons crÃ©er une image Docker pour cette application afin de l'exÃ©cuter dans un conteneur. L'objectif est d'empaqueter cette application, avec toutes ses dÃ©pendances, dans une image Docker que nous pourrons exÃ©cuter sur n'importe quel systÃ¨me."
---
import { FileTree } from 'nextra/components'

# ğŸš€ CrÃ©ation d'une Image Docker : Un Cas Concret

Dans cet exemple, nous allons empaqueter une application web simple en Node.js dans une image Docker afin de l'exÃ©cuter dans un conteneur. L'objectif est de standardiser le dÃ©ploiement en encapsulant l'application et toutes ses dÃ©pendances dans une image reproductible.

---

## ğŸ“¦ L'Application Node.js

Supposons que notre application est un serveur Node.js qui affiche **"Hello, Docker!"** sur le port **3000**. La structure du projet est la suivante :


<FileTree>
  <FileTree.Folder name="app" defaultOpen>
    <FileTree.File name="app.js" />
    <FileTree.File name="package.json" />
  </FileTree.Folder>
</FileTree>

### ğŸ³ **app.js**
```javascript copy
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.send('Hello, Docker!');
});

app.listen(3000, () => {
  console.log('App is running on port 3000');
});
```

### ğŸ³ **package.json**
```json copy
{
  "name": "docker-node-app",
  "version": "1.0.0",
  "main": "app.js",
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "^4.17.1"
  }
}
```

---

## ğŸ”§ Ã‰criture du Dockerfile

Le **Dockerfile** est la "recette" qui permet de construire l'image Docker. Voici un exemple de Dockerfile pour notre application Node.js :

```Dockerfile copy
# Ã‰tape 1 : Utiliser une image de base lÃ©gÃ¨re avec Node.js
FROM node:14-alpine

# Ã‰tape 2 : DÃ©finir le rÃ©pertoire de travail dans le conteneur
WORKDIR /app

# Ã‰tape 3 : Copier le fichier package.json et installer les dÃ©pendances
COPY package.json ./
RUN npm install

# Ã‰tape 4 : Copier le reste du code source de l'application
COPY . .

# Ã‰tape 5 : Exposer le port 3000 pour accÃ©der Ã  l'application
EXPOSE 3000

# Ã‰tape 6 : DÃ©finir la commande pour dÃ©marrer l'application
CMD ["npm", "start"]
```

> **Explications :**  
> - **`FROM node:14-alpine`** : Utilise une image de base lÃ©gÃ¨re avec Node.js (version 14) sur Alpine Linux.  
> - **`WORKDIR /app`** : DÃ©finit `/app` comme rÃ©pertoire de travail dans le conteneur.  
> - **`COPY package.json ./`** et **`RUN npm install`** : Installe les dÃ©pendances de l'application.  
> - **`COPY . .`** : Copie l'ensemble du code source dans le conteneur.  
> - **`EXPOSE 3000`** : Rend le port 3000 accessible de l'extÃ©rieur.  
> - **`CMD ["npm", "start"]`** : Lance l'application lors du dÃ©marrage du conteneur.

---

## ğŸ› ï¸ Construction de l'Image Docker

Pour construire l'image Docker, placez-vous dans le rÃ©pertoire contenant le Dockerfile et exÃ©cutez la commande suivante :

```bash copy
docker build -t my-node-app .
```

> **DÃ©tails :**  
> - **`-t my-node-app`** : Tag (nom) de l'image crÃ©Ã©e.  
> - **`.`** : Indique que le contexte de build est le rÃ©pertoire courant.

Docker lira le Dockerfile, exÃ©cutera chaque instruction et gÃ©nÃ©rera une image contenant l'application Node.js.

---

## ğŸš€ ExÃ©cution de l'Image Docker

Pour lancer un conteneur Ã  partir de l'image crÃ©Ã©e, utilisez :

```bash copy
docker run -d -p 3000:3000 my-node-app
```

> **Explications :**  
> - **`-d`** : Lance le conteneur en mode dÃ©tachÃ© (en arriÃ¨re-plan).  
> - **`-p 3000:3000`** : Mappe le port 3000 du conteneur au port 3000 de l'hÃ´te.  
> - **`my-node-app`** : Nom de l'image Ã  utiliser.

Une fois le conteneur en cours d'exÃ©cution, ouvrez votre navigateur et rendez-vous sur [http://localhost:3000](http://localhost:3000) pour voir l'application afficher **"Hello, Docker!"**.

---

## ğŸ“Œ RÃ©sumÃ©

- **Dockerfile** : Automatisation de la crÃ©ation d'une image Docker pour une application Node.js.
- **Images Docker** : Permettent d'encapsuler une application avec toutes ses dÃ©pendances pour garantir une exÃ©cution uniforme sur tout environnement.
- **Conteneurs** : Instances isolÃ©es d'une image qui s'exÃ©cutent de maniÃ¨re reproductible, quel que soit l'environnement (dev, test, prod).

Cette approche vous permet de **standardiser et simplifier le dÃ©ploiement d'applications** en crÃ©ant des images Docker, garantissant ainsi une exÃ©cution cohÃ©rente et fiable sur n'importe quelle machine oÃ¹ Docker est installÃ©. ğŸš€