import { Callout } from 'nextra/components'

# ü™ù R√®gles des Hooks en React

React a introduit les Hooks dans sa version 16.8 pour permettre aux d√©veloppeurs d'utiliser l'√©tat et d'autres fonctionnalit√©s de React sans avoir √† √©crire des classes. Cependant, il y a certaines r√®gles strictes que vous devez suivre lors de l'utilisation des Hooks. Voici ces r√®gles:

## ü™ù 1. Ne pas appeler les Hooks √† l'int√©rieur des boucles, des conditions ou des fonctions imbriqu√©es

**Il est important de toujours appeler les Hooks au niveau sup√©rieur de vos fonctions de composant ou de vos fonctions personnalis√©es.** Vous ne devez jamais les appeler √† l'int√©rieur des boucles, des conditions ou des fonctions imbriqu√©es. Cela garantit que les Hooks sont appel√©s dans le m√™me ordre chaque fois qu'un composant est rendu, ce qui permet √† React de maintenir correctement l'√©tat entre plusieurs appels de Hooks.
Voici deux exemples :  

### ‚úÖ **Exemple Valide** (Respecte les r√®gles des Hooks)  
```jsx copy
import { useState, useEffect } from "react";

function ValidComponent() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("Le compteur a chang√© :", count);
  }, [count]);

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
    </div>
  );
}
```
‚û°Ô∏è Ici, `useState` et `useEffect` sont appel√©s directement au d√©but de la fonction, garantissant qu'ils s'ex√©cutent dans le m√™me ordre √† chaque rendu.

---

### ‚ö†Ô∏è **Exemple Invalide** (Ne respecte pas les r√®gles des Hooks)  
```jsx copy
import { useState, useEffect } from "react";

function InvalidComponent() {
  const [count, setCount] = useState(0);

  if (count > 5) {
  const [otherState, setOtherState] = useState("Erreur"); // ‚ö†Ô∏è Mauvaise pratique !
  }

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
    </div>
  );
}
```
‚ö†Ô∏è **Probl√®me** :  
- `useState("Erreur")` est appel√© dans une condition (`if (count > 5)`).  
- Cela casse l'ordre d'ex√©cution des Hooks, car React s'attend √† ce que chaque Hook soit toujours appel√© dans le m√™me ordre √† chaque rendu du composant.  

## ü™ù 2. Appeler les Hooks uniquement √† partir de fonctions de composant ou de fonctions personnalis√©es

**Les Hooks ne peuvent √™tre appel√©s que depuis des fonctions de composant React ou des fonctions personnalis√©es.** Vous ne pouvez pas les appeler √† partir de fonctions JavaScript r√©guli√®res. De plus, ils ne peuvent pas √™tre appel√©s √† partir de fonctions de classe.
Voici deux exemples illustrant cette r√®gle :  

---

### ‚úÖ **Exemple Valide** (Les Hooks sont utilis√©s dans un composant fonctionnel)  
```jsx copy
import { useState, useEffect } from "react";

function ValidComponent() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("Compteur mis √† jour :", count);
  }, [count]);

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
    </div>
  );
}
```
‚úÖ **Pourquoi c'est valide ?**  
- `useState` et `useEffect` sont appel√©s dans un composant fonctionnel (`ValidComponent`).  
- React peut g√©rer correctement l'√©tat et le cycle de vie du composant.

---

### ‚ö†Ô∏è **Exemple Invalide** (Un Hook est appel√© dans une fonction classique)  
```jsx copy
import { useState } from "react";

function badFunction() {
  const [count, setCount] = useState(0); // ‚ö†Ô∏è ERREUR : useState ne peut pas √™tre utilis√© ici
  return count;
}

function InvalidComponent() {
  return <p>Valeur : {badFunction()}</p>;
}
```
‚ö†Ô∏è **Probl√®me** :  
- `badFunction` est une fonction JavaScript classique, **pas un composant React**.  
- Les Hooks **ne peuvent √™tre appel√©s que dans des composants fonctionnels** ou des Hooks personnalis√©s.  

---

### ‚úÖ **Correction avec un Hook personnalis√©**  
Si vous voulez r√©utiliser la logique d'un Hook, il faut cr√©er un **Hook personnalis√©** (une fonction qui commence par `use` et utilise des Hooks en interne).  

```jsx copy
import { useState } from "react";

// ‚úÖ Un Hook personnalis√© commence par "use"
function useCounter() {
  const [count, setCount] = useState(0);
  return { count, setCount };
}

function ValidComponent() {
  const { count, setCount } = useCounter(); // Utilisation du Hook personnalis√©

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
    </div>
  );
}
```
‚úÖ **Pourquoi c'est valide ?**  
- `useCounter` est un **Hook personnalis√©**, donc il peut utiliser `useState`.  
- `useCounter` est **appel√© dans un composant fonctionnel**, ce qui respecte les r√®gles de React.  

---

### ‚ö†Ô∏è **Exemple Invalide avec une Classe** (Les Hooks ne fonctionnent pas dans les classes)  
```jsx copy
import { useState } from "react";

class InvalidClassComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }

  increment() {
    this.setState({ count: this.state.count + 1 });
  }

  render() {
  const [count, setCount] = useState(0); // ‚ö†Ô∏è ERREUR : Impossible d'utiliser un Hook dans une classe
    return (
      <div>
        <p>Compteur : {count}</p>
        <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
      </div>
    );
  }
}
```
‚ö†Ô∏è **Probl√®me** :  
- Les **composants de classe** utilisent `this.state` et `this.setState()`, pas les Hooks.  
- `useState` **ne peut pas √™tre utilis√© dans une classe**.  

---

### ‚úÖ **Correction avec un Composant Fonctionnel**  
Si vous utilisez React moderne, il est recommand√© d'utiliser des **composants fonctionnels avec des Hooks** √† la place des classes :  
```jsx copy
import { useState } from "react";

function ValidComponent() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>Incr√©menter</button>
    </div>
  );
}
```
‚úÖ **Pourquoi c'est valide ?**  
- Utilisation d'un **composant fonctionnel** au lieu d'une classe.  
- `useState` est utilis√© **correctement au niveau sup√©rieur du composant**.  

---

### ÔøΩ **R√©sum√© des R√®gles :**  

‚úÖ **Les Hooks doivent √™tre appel√©s dans :**
- ‚úîÔ∏è Un composant fonctionnel React (`function MonComposant() {}`)
- ‚úîÔ∏è Un Hook personnalis√© (`function useMonHook() {}`)

‚ö†Ô∏è **Les Hooks NE DOIVENT PAS √™tre appel√©s dans :**
- ‚ö†Ô∏è Une fonction JavaScript classique (`function badFunction() {}`)
- ‚ö†Ô∏è Une classe React (`class MonComposant extends React.Component {}`)

En suivant ces r√®gles, vous √©vitez des erreurs et garantissez un bon fonctionnement de votre application React. üéØ
## ü™ù 3. Utiliser les Hooks uniquement √† partir de packages React

**Il est recommand√© d'utiliser les Hooks uniquement √† partir de packages React.** Bien que rien n'emp√™che techniquement de cr√©er vos propres Hooks, il est g√©n√©ralement pr√©f√©rable d'utiliser ceux fournis par React ou par des biblioth√®ques tierces fiables. 
 <Callout type="info" emoji="‚ÑπÔ∏è">
Cela garantit que les Hooks sont compatibles avec les futures versions de React et qu'ils sont test√©s et maintenus par des experts.
</Callout>

En suivant ces r√®gles, vous pouvez tirer pleinement parti des Hooks pour simplifier votre code et am√©liorer la r√©utilisabilit√© de vos composants.