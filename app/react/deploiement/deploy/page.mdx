## üöÄ D√©ploiement d'une application React (rappel rapide)

Avant de d√©ployer, assurez‚Äëvous d'avoir un script `build` dans votre `package.json`. Pour une application cr√©√©e avec Create React App :

```bash copy
npm run build
```

La commande produit un dossier `build/` pr√™t √† √™tre servi par un serveur statique.

---

## ÔøΩ D√©ploiement sur Vercel (pas de config n√©cessaire pour la plupart des apps)

Vercel d√©tecte automatiquement une application React et propose des r√©glages par d√©faut. M√©thode simple : connectez votre d√©p√¥t GitHub/GitLab/Bitbucket dans l'interface Vercel et indiquez le dossier de sortie (`build`) et la commande (`npm run build`), ou laissez les valeurs par d√©faut.

√âtapes rapides :

```bash copy
# (optionnel) installer le CLI
npm i -g vercel

# depuis la racine du projet (optionnel pour un premier deploy interactif)
vercel
```

Points importants :
- Variables d'environnement : configurez-les dans le dashboard Vercel (Settings ‚Üí Environment Variables) pour les cl√©s API, etc.
- Routes & SPA : Vercel g√®re g√©n√©ralement les SPA correctement, mais pour des r√®gles sp√©cifiques vous pouvez ajouter un `vercel.json` avec des rewrites.
- Domaines : ajoutez un domaine personnalis√© et activez le TLS en un clic.

Exemple minimal `vercel.json` pour forcer les routes vers `index.html` (SPA) :

```json copy
{
	"routes": [
		{ "src": "/(.*)", "dest": "/index.html" }
	]
}
```

---

## üì¶ D√©ploiement sur Netlify (static SPA)

Netlify est tr√®s simple pour les apps statiques. Dans le tableau de bord Netlify, choisissez "New site from Git", connectez votre d√©p√¥t et configurez :

- Build command : `npm run build` (ou `pnpm build` / `yarn build`)
- Publish directory : `build`

R√®gle importante pour les SPA (routing c√¥t√© client) : cr√©ez un fichier `_redirects` √† la racine du dossier `public/` (ou dans `build/` apr√®s le build) contenant :

```
/*    /index.html   200
```

Cela permet de rediriger toutes les requ√™tes vers `index.html` et d'√©viter les 404 sur les routes g√©r√©es c√¥t√© client.

Variables d'environnement : configurez-les dans Site settings ‚Üí Build & deploy ‚Üí Environment.

---

## üîß Conseils communs et bonnes pratiques

- Compression & cache : configurez headers de cache et compression (gzip/brotli) c√¥t√© h√©bergeur ou CDN.
- Analyser le bundle : installez `source-map-explorer` et g√©n√©rez un rapport pour identifier les d√©pendances lourdes.

```bash copy
npm install --save-dev source-map-explorer
npm run build
npx source-map-explorer build/static/js/*.js
```

- Variables d'environnement : ne mettez jamais de secrets dans le code client. Utilisez les variables d'environnement des plateformes (Vercel/Netlify) ou un backend s√©curis√©.
- Fichiers statiques : tout ce qui est dans `public/` (Create React App) est copi√© tel quel dans `build/`.
- Redirect / SPA fallback : Netlify `_redirects` ou Vercel `vercel.json` pour √©viter les 404.

---

## üß™ Validation locale avant d√©ploiement

Servez le build localement pour v√©rifier le comportement :

```bash copy
npm install -g serve
npm run build
serve -s build -l 5000
# Ouvre http://localhost:5000
```

## ‚öôÔ∏è CI / GitHub Actions (optionnel)

Exemple minimal de workflow GitHub Actions (build + deploy sur Netlify via netlify/cli) :

```yaml copy
name: build-and-deploy
on:
	push:
		branches: [ main ]

jobs:
	build:
		runs-on: ubuntu-latest
		steps:
			- uses: actions/checkout@v3
			- name: Use Node.js
				uses: actions/setup-node@v4
				with:
					node-version: '18'
			- run: npm ci
			- run: npm run build
			- run: npx netlify deploy --prod --dir=build --auth=$NETLIFY_AUTH_TOKEN --site=$NETLIFY_SITE_ID
				env:
					NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
					NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
```

---

## ‚úÖ R√©capitulatif rapide

- `npm run build` ‚Üí dossier `build/`.
- Netlify : configurez Build command `npm run build`, Publish `build`, ajoutez `_redirects` pour SPA.
- Vercel : souvent automatique ; utilisez `vercel` CLI ou interface et configurez les env vars.
- Testez localement avec `serve -s build`.