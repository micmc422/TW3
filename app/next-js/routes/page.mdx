---
icon: "â–¶"
---
# ğŸš€ **Routing basÃ© sur le systÃ¨me de fichiers dans Next.js (`app/` vs `pages/`)**  

<Term word="Next.js">Next.js</Term> propose deux systÃ¨mes de routing basÃ©s sur lâ€™arborescence des fichiers :  
-  **Le Pages Router (`pages/`)** (jusqu'Ã  Next.js 12 et optionnel dans Next.js 13+).  
-  **Le <Term word="App Router">App Router</Term> (`app/`)** (introduit dans Next.js 13 et par dÃ©faut Ã  partir de Next.js 14).  

Voyons les diffÃ©rences et avantages de ces deux approches.  

---

## **1ï¸âƒ£ Routing dans `pages/` (Pages Router - Ancienne mÃ©thode)**  

ğŸ“Œ Dans `pages/`, chaque fichier `.js` ou `.tsx` dans `pages/` dÃ©finit une **route unique**.  
ğŸ“Œ Le fichier `pages/_app.js` sert de layout global pour toutes les pages.  

### âš¡ ** Exemple dâ€™architecture `pages/` :**
```
pages/
â”œâ”€â”€ index.tsx        â†’ Route "/"
â”œâ”€â”€ about.tsx        â†’ Route "/about"
â”œâ”€â”€ contact.tsx      â†’ Route "/contact"
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ index.tsx    â†’ Route "/blog"
â”‚   â”œâ”€â”€ [id].tsx     â†’ Route "/blog/:id" (dynamic routing)
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ hello.ts     â†’ API route "/api/hello"
â”œâ”€â”€ _app.tsx         â†’ Layout global
â”œâ”€â”€ _document.tsx    â†’ Personnalisation du document HTML
```

### **âœ… Avantages de `pages/` :**  
âœ” **Facile Ã  comprendre et rapide Ã  mettre en place**.  
âœ” **Compatible avec Next.js 12 et infÃ©rieur**.  
âœ” **Fonctionne bien avec les <Term word="API">API</Term> Routes (`pages/api/`)**.  

### **âŒ InconvÃ©nients de `pages/` :**  
âŒ **Layouts difficiles Ã  gÃ©rer** â†’ il faut dupliquer le code ou utiliser `_app.js`.  
âŒ **Moins optimisÃ©** â†’ toutes les pages sont des Client Components par dÃ©faut.  
âŒ **Gestion du rendu moins performante** â†’ nÃ©cessite des API Routes pour rÃ©cupÃ©rer des donnÃ©es serveur.  

---

## **2ï¸âƒ£ Routing dans `app/` (App Router - Nouvelle mÃ©thode)**  

ğŸ“Œ **Chaque dossier dans `app/` devient une route** (au lieu d'un fichier `.tsx`).  
ğŸ“Œ **Chaque page est dÃ©finie par un fichier `page.tsx`**.  
ğŸ“Œ **Les layouts (`layout.tsx`) permettent de structurer lâ€™interface** sans recharger les composants communs.  

### âš¡ ** Exemple dâ€™architecture `app/` :**
```
app/
â”œâ”€â”€ layout.tsx        â†’ Layout global
â”œâ”€â”€ page.tsx          â†’ Route "/"
â”œâ”€â”€ about/
â”‚   â”œâ”€â”€ page.tsx      â†’ Route "/about"
â”‚   â”œâ”€â”€ layout.tsx    â†’ Layout spÃ©cifique Ã  "/about"
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx      â†’ Route "/blog"
â”‚   â”œâ”€â”€ [id]/         â†’ Route dynamique "/blog/:id"
â”‚   â”‚   â”œâ”€â”€ page.tsx  â†’ Contenu dâ€™un article
â”œâ”€â”€ api/              â†’ (DÃ©prÃ©ciÃ©, remplacÃ© par Server Actions)
â”œâ”€â”€ loading.tsx       â†’ Animation de chargement globale
â”œâ”€â”€ error.tsx         â†’ Gestion des erreurs globale
```

### **âœ… Avantages de `app/` :**  
âœ” **Layouts imbriquÃ©s (`layout.tsx`)** â†’ Ã©vite de recharger des parties inutiles de lâ€™UI.  
âœ” **Server Components par dÃ©faut** â†’ rÃ©duit le JavaScript envoyÃ© au client.  
âœ” **Gestion native des mÃ©tadonnÃ©es (`generateMetadata()`)** â†’ plus besoin de `<Head>`.  
âœ” **Server Actions** â†’ permet de gÃ©rer des actions cÃ´tÃ© serveur sans API Routes.  

### **âŒ InconvÃ©nients de `app/` :**  
âŒ **Changement de paradigme** â†’ nÃ©cessite dâ€™apprendre de nouvelles conventions.  
âŒ **Moins de compatibilitÃ© avec certains anciens outils** (ex: API Routes).  

---

## **3ï¸âƒ£ Comparaison entre `pages/` et `app/`**  

| FonctionnalitÃ©           | Pages Router (`pages/`) | App Router (`app/`) |
|-------------------------|------------------------|----------------------|
| **DÃ©finition des routes** | BasÃ© sur les fichiers | BasÃ© sur les dossiers |
| **Layouts** | `_app.tsx` pour tout | `layout.tsx` par dossier |
| **Rendu par dÃ©faut** | Client Components | Server Components |
| **Gestion des mÃ©tadonnÃ©es** | `<Head>` dans chaque page | `generateMetadata()` natif |
| **API Routes** | `pages/api/` | RemplacÃ© par Server Actions |
| **Streaming et Suspense** | Complexe Ã  gÃ©rer | IntÃ©grÃ© nativement |
| **Performance** | Moins optimisÃ© | Moins de JS cÃ´tÃ© client |

---

## **4ï¸âƒ£ Exemple pratique : Route dynamique avec `pages/` vs `app/`**  

### **ğŸ“Œ Dans `pages/` (Ancienne mÃ©thode)**  
```tsx filename="pages/blog/[id].tsx" copy
import { useRouter } from "next/router";

export default function BlogPost() {
  const router = useRouter();
  const { id } = router.query;

  return <h1>Article {id}</h1>;
}
```
ğŸ’¡ **Utilisation de `useRouter()` pour rÃ©cupÃ©rer lâ€™ID de lâ€™<Term word="URL">URL</Term>**.  

---

### **ğŸ“Œ Dans `app/` (Nouvelle mÃ©thode)**  
```tsx filename="app/blog/[id]/page.tsx" copy
export default function BlogPost({ params }: { params: { id: string } }) {
  return <h1>Article {params.id}</h1>;
}
```
ğŸ’¡ **Les paramÃ¨tres (`params.id`) sont passÃ©s directement dans la fonction, sans `useRouter()`** !  

---

## **ğŸ¯ Conclusion : Quelle approche choisir ?**  

| **Si vous travaillez sur...** | **Recommandation** |
|-----------------------------|-------------------|
| **Un projet Next.js 12 ou antÃ©rieur** | Utilisez `pages/` |
| **Un projet existant en `pages/`** | Continuez en `pages/` sauf si besoin dâ€™optimisation |
| **Un nouveau projet en Next.js 13+** | **Utilisez `app/` pour profiter des nouvelles fonctionnalitÃ©s** |

ğŸ’¡ **Le App Router (`app/`) est la meilleure option pour un projet moderne**, grÃ¢ce Ã  ses **performances amÃ©liorÃ©es, Server Components et layouts flexibles**. ğŸš€  