# ğŸš€ **Gestion des erreurs (`error.tsx`) dans Next.js**  

Dans **<Term word="Next.js">Next.js</Term> 13+ avec lâ€™<Term word="App Router">App Router</Term>**, il est possible de gÃ©rer les erreurs de maniÃ¨re **native** grÃ¢ce au fichier `error.tsx`.  
Contrairement Ã  `pages/_error.js` utilisÃ© dans l'ancien systÃ¨me, `error.tsx` est un **<Term word="React">React</Term> Client Component** qui intercepte les erreurs sur une page ou une section spÃ©cifique.  

---

## **1ï¸âƒ£ Qu'est-ce que `error.tsx` ?**  

ğŸ“Œ **Un fichier `error.tsx`** permet d'afficher une interface alternative lorsqu'une erreur survient dans une page ou un layout.  
ğŸ“Œ Il remplace la gestion manuelle des erreurs avec `try/catch` ou `Error Boundaries`.  
ğŸ“Œ Il est **spÃ©cifique Ã  un dossier** :  
- `app/error.tsx` â†’ Sâ€™applique Ã  **tout le site**.  
- `app/dashboard/error.tsx` â†’ Sâ€™applique uniquement aux erreurs dans `/dashboard`.  

---

## **2ï¸âƒ£ Exemple dâ€™un `error.tsx` global**  

ğŸ“ **Ajout dâ€™une gestion dâ€™erreur pour tout le site**  

```tsx filename="app/error.tsx" copy
"use client"; // Obligatoire pour un error boundary

import { useEffect } from "react";

export default function ErrorPage({ error, reset }: { error: Error; reset: () => void }) {
  useEffect(() => {
    console.error("Erreur dÃ©tectÃ©e :", error);
  }, [error]);

  return (
    <div className="flex flex-col items-center justify-center h-screen">
      <h1 className="text-2xl font-bold text-red-600">Une erreur est survenue</h1>
      <p className="mb-4">{error.message}</p>
      <button
        className="px-4 py-2 bg-blue-500 text-white rounded"
        onClick={() => reset()} // Recharge la page
      >
        RÃ©essayer
      </button>
    </div>
  );
}
```
ğŸ’¡ **Explication :**  
- âœ… **`use client` est obligatoire**, car `error.tsx` est un **Client Component**.  
- âœ… `reset()` permet de **rÃ©essayer** en rechargeant la page.  
- âœ… **`useEffect` pour loguer les erreurs** dans la console.  

---

## **3ï¸âƒ£ Exemple : Gestion des erreurs uniquement pour `/dashboard`**  

ğŸ“ **Ajout dâ€™un `error.tsx` spÃ©cifique pour `/dashboard`**  

```tsx filename="app/dashboard/error.tsx" copy
"use client";

export default function DashboardError({ error, reset }: { error: Error; reset: () => void }) {
  return (
    <div className="flex flex-col items-center justify-center h-screen">
      <h1 className="text-2xl font-bold text-red-600">Erreur dans le dashboard</h1>
      <p className="mb-4">{error.message}</p>
      <button
        className="px-4 py-2 bg-orange-500 text-white rounded"
        onClick={() => reset()}
      >
        RÃ©essayer
      </button>
    </div>
  );
}
```
ğŸ“ **Ce fichier interceptera uniquement les erreurs dans `/dashboard`**.

---

## **4ï¸âƒ£ DÃ©monstration avec une page qui gÃ©nÃ¨re une erreur**  

ğŸ“ **CrÃ©ons une page qui lÃ¨ve une erreur volontairement**  

```tsx filename="app/dashboard/page.tsx" copy
export default function DashboardPage() {
  throw new Error("Erreur simulÃ©e dans le dashboard !");
  return <h1>Tableau de bord</h1>;
}
```
ğŸ“ **RÃ©sultat :**  
- ğŸš¨ Lorsquâ€™un utilisateur visite `/dashboard`, Next.js affichera **`app/dashboard/error.tsx`** au lieu dâ€™une erreur serveur.  
- ğŸ” Lâ€™utilisateur pourra cliquer sur **"RÃ©essayer"** pour tenter de recharger la page.  

---

## **5ï¸âƒ£ DiffÃ©rence avec `_error.js` dans `pages/`**  

| **MÃ©thode** | âŒ **`pages/_error.js` (Ancien)** | âœ… **`error.tsx` (App Router)** |
|-------------|---------------------------------|---------------------------------|
| Gestion automatique des erreurs | âŒ Non | âœ… Oui |
| Besoin dâ€™un `try/catch` dans chaque page | âœ… Oui | âŒ Non |
| Scope de lâ€™erreur | ğŸŒ Global uniquement | âœ… Global + Sections |
| CapacitÃ© de rÃ©essayer (`reset()`) | âŒ Non | âœ… Oui |
| Meilleure expÃ©rience utilisateur | âš ï¸ Moyen | âœ… Oui |

---

## **ğŸ¯ Conclusion : Pourquoi utiliser `error.tsx` ?**  

âœ” **Facile Ã  implÃ©menter** â†’ Plus besoin de `try/catch` partout.  
âœ” **Modulaire** â†’ Peut Ãªtre dÃ©fini globalement ou par section.  
âœ” **ExpÃ©rience utilisateur amÃ©liorÃ©e** â†’ Lâ€™utilisateur peut **rÃ©essayer** facilement.  