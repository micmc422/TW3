# ğŸš€ **Routes ParallÃ¨les dans Next.js**  

Les **Routes ParallÃ¨les** (Parallel Routes) sont une fonctionnalitÃ© puissante de Next.js 13+ qui permet de **rendre plusieurs pages simultanÃ©ment** dans une mÃªme mise en page. Cela permet de crÃ©er des interfaces complexes comme des **dashboards**, des **modales**, ou des **vues cÃ´te Ã  cÃ´te**.  

---

## **1ï¸âƒ£ Qu'est-ce qu'une Route ParallÃ¨le ?**  

ğŸ“Œ Une **Route ParallÃ¨le** permet d'afficher **plusieurs segments de route** en mÃªme temps dans un mÃªme layout.  
ğŸ“Œ Elle est dÃ©finie par un dossier prÃ©fixÃ© par `@` (appelÃ© un **"slot"**).  
ğŸ“Œ Chaque slot peut charger son propre contenu **indÃ©pendamment** des autres.  

**ğŸ›  Exemple d'architecture avec des routes parallÃ¨les :**  
```
app/
â”œâ”€â”€ layout.tsx        â†’ Layout principal avec slots
â”œâ”€â”€ page.tsx          â†’ Page principale "/"
â”œâ”€â”€ @dashboard/       â†’ Slot "dashboard"
â”‚   â”œâ”€â”€ page.tsx      â†’ Contenu du slot dashboard
â”‚   â”œâ”€â”€ loading.tsx   â†’ Loading spÃ©cifique au slot
â”œâ”€â”€ @sidebar/         â†’ Slot "sidebar"
â”‚   â”œâ”€â”€ page.tsx      â†’ Contenu du slot sidebar
```
ğŸ“ **Les deux slots `@dashboard` et `@sidebar` sont rendus en parallÃ¨le !**  

---

## **2ï¸âƒ£ CrÃ©ation d'un Layout avec des Slots ParallÃ¨les**  

ğŸ“ **Le layout reÃ§oit les slots comme props enfants**  

```tsx filename="app/layout.tsx" copy
export default function RootLayout({
  children,
  dashboard,
  sidebar,
}: {
  children: React.ReactNode;
  dashboard: React.ReactNode;
  sidebar: React.ReactNode;
}) {
  return (
    <html lang="fr">
      <body>
        <header>
          <nav>ğŸ§­ Navigation</nav>
        </header>
        <div className="flex">
          <aside className="w-64">{sidebar}</aside>
          <main className="flex-1">
            {children}
            {dashboard}
          </main>
        </div>
      </body>
    </html>
  );
}
```
ğŸ’¡ **Explication :**  
- âœ… `children` correspond au contenu de `page.tsx` de la route actuelle.  
- âœ… `dashboard` correspond au contenu de `@dashboard/page.tsx`.  
- âœ… `sidebar` correspond au contenu de `@sidebar/page.tsx`.  
- âœ… **Tous sont rendus simultanÃ©ment !**  

---

## **3ï¸âƒ£ Exemple : Contenu des Slots**  

ğŸ“ **Slot Dashboard (`@dashboard/page.tsx`)**  

```tsx filename="app/@dashboard/page.tsx" copy
export default function DashboardSlot() {
  return (
    <div className="p-4 bg-blue-100 rounded-lg">
      <h2 className="text-xl font-bold">ğŸ“Š Tableau de bord</h2>
      <p>Statistiques et mÃ©triques en temps rÃ©el.</p>
    </div>
  );
}
```

ğŸ“ **Slot Sidebar (`@sidebar/page.tsx`)**  

```tsx filename="app/@sidebar/page.tsx" copy
export default function SidebarSlot() {
  return (
    <nav className="p-4 bg-gray-100">
      <h3 className="font-semibold mb-2">ğŸ“Œ Menu</h3>
      <ul className="space-y-2">
        <li><a href="/">ğŸ  Accueil</a></li>
        <li><a href="/settings">âš™ï¸ ParamÃ¨tres</a></li>
        <li><a href="/profile">ğŸ‘¤ Profil</a></li>
      </ul>
    </nav>
  );
}
```

ğŸ’¡ **RÃ©sultat :** La sidebar et le dashboard s'affichent **en mÃªme temps**, dans la mÃªme page !  

---

## **4ï¸âƒ£ Gestion du Loading et des Erreurs par Slot**  

ğŸ“Œ Chaque slot peut avoir son propre fichier `loading.tsx` et `error.tsx`.  

**ğŸ›  Structure avec loading et error :**  
```
app/
â”œâ”€â”€ @dashboard/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ loading.tsx   â†’ Loader spÃ©cifique au dashboard
â”‚   â”œâ”€â”€ error.tsx     â†’ Gestion d'erreur spÃ©cifique
â”œâ”€â”€ @sidebar/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ loading.tsx   â†’ Loader spÃ©cifique Ã  la sidebar
```

ğŸ“ **Exemple de loading pour le dashboard**  

```tsx filename="app/@dashboard/loading.tsx" copy
export default function DashboardLoading() {
  return (
    <div className="p-4 bg-blue-50 animate-pulse rounded-lg">
      <p className="text-gray-500">â³ Chargement du tableau de bord...</p>
    </div>
  );
}
```

ğŸ’¡ **Chaque slot charge indÃ©pendamment**, donc si le dashboard prend du temps Ã  charger, la sidebar reste visible !  

---

## **5ï¸âƒ£ Cas d'usage : Modales avec Routes ParallÃ¨les**  

ğŸ“Œ Les routes parallÃ¨les sont parfaites pour les **modales** qui peuvent Ãªtre ouvertes via une route.  

**ğŸ›  Structure pour une modale :**  
```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx          â†’ Page principale
â”œâ”€â”€ @modal/
â”‚   â”œâ”€â”€ default.tsx   â†’ Slot vide par dÃ©faut
â”‚   â”œâ”€â”€ (.)photo/
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx â†’ Modale photo
â”œâ”€â”€ photo/
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx  â†’ Page photo complÃ¨te
```

ğŸ“ **Layout intÃ©grant la modale**  

```tsx filename="app/layout.tsx" copy
export default function RootLayout({
  children,
  modal,
}: {
  children: React.ReactNode;
  modal: React.ReactNode;
}) {
  return (
    <html lang="fr">
      <body>
        {children}
        {modal}
      </body>
    </html>
  );
}
```

ğŸ“ **Default.tsx pour le slot vide**  

```tsx filename="app/@modal/default.tsx" copy
export default function ModalDefault() {
  return null; // Pas de modale affichÃ©e par dÃ©faut
}
```

ğŸ“ **Contenu de la modale**  

```tsx filename="app/@modal/(.)photo/[id]/page.tsx" copy
import { notFound } from "next/navigation";

export default function PhotoModal({ params }: { params: { id: string } }) {
  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center">
      <div className="bg-white p-6 rounded-lg max-w-lg">
        <h2 className="text-xl font-bold mb-4">ğŸ“· Photo {params.id}</h2>
        <img 
          src={`/images/photo-${params.id}.jpg`} 
          alt={`Photo ${params.id}`}
          className="rounded"
        />
        <a href="/" className="mt-4 block text-blue-500">â† Retour</a>
      </div>
    </div>
  );
}
```

ğŸ’¡ **RÃ©sultat :** En cliquant sur un lien vers `/photo/1`, la modale s'ouvre **au-dessus** de la page actuelle sans la remplacer !  

---

## **6ï¸âƒ£ Le fichier `default.tsx`**  

ğŸ“Œ Le fichier `default.tsx` est **obligatoire** pour les slots qui n'ont pas de contenu correspondant Ã  la route actuelle.  

ğŸ“ **Quand utiliser `default.tsx` ?**  
- Quand un slot n'a pas de page pour certaines routes.  
- Pour Ã©viter une erreur 404 dans le slot.  

```tsx filename="app/@sidebar/default.tsx" copy
export default function SidebarDefault() {
  return (
    <nav className="p-4 bg-gray-50">
      <p className="text-gray-400">Navigation par dÃ©faut</p>
    </nav>
  );
}
```

---

## **7ï¸âƒ£ Comparaison : Routes ParallÃ¨les vs Layouts classiques**  

| âš¡ **CritÃ¨re** | ğŸ— **Layouts classiques** | ğŸš€ **Routes ParallÃ¨les** |
|--------------|------------------------|-------------------------|
| Nombre de contenus simultanÃ©s | 1 (`children`) | Plusieurs slots |
| Chargement indÃ©pendant | âŒ Non | âœ… Oui |
| Loading/Error par section | âŒ Non | âœ… Oui |
| Utilisation pour modales | âŒ Complexe | âœ… Natif |
| Cas d'usage | Sites simples | Dashboards, modales, apps complexes |

---

## **ğŸ¯ Conclusion : Pourquoi utiliser les Routes ParallÃ¨les ?**  

âœ” **Interfaces complexes** â†’ Affichez plusieurs vues simultanÃ©ment (dashboards, split views).  
âœ” **Chargement indÃ©pendant** â†’ Chaque slot peut avoir son propre Ã©tat de loading.  
âœ” **Modales natives** â†’ Ouvrez des modales via l'URL sans perdre le contexte.  
âœ” **ExpÃ©rience utilisateur optimisÃ©e** â†’ L'utilisateur voit le contenu progressivement.  

ğŸ’¡ **Les routes parallÃ¨les sont essentielles pour crÃ©er des applications Next.js modernes et performantes !** ğŸš€  
