# ğŸš€ **Server Components vs Client Components dans Next.js**  

Avec lâ€™introduction du **App Router (`app/`)**, Next.js 13+ repose sur une architecture hybride basÃ©e sur **Server Components** et **Client Components**. Cette approche optimise le rendu, amÃ©liore les performances et rÃ©duit la quantitÃ© de JavaScript envoyÃ©e au client.  

---

## **1ï¸âƒ£ Quâ€™est-ce quâ€™un Server Component ?**  

ğŸ“Œ **Les Server Components (par dÃ©faut)** sont **rendus cÃ´tÃ© serveur** et **envoyÃ©s sous forme de HTML** au navigateur.  
ğŸ“Œ âœ… **Avantages** :  
- **Aucun JavaScript cÃ´tÃ© client** â†’ amÃ©liore la performance.  
- **AccÃ¨s direct aux bases de donnÃ©es et API** â†’ sans exposer de code sensible.  
- **OptimisÃ© pour le streaming** â†’ le rendu peut Ãªtre progressif.  

ğŸ“ **Exemple de Server Component (par dÃ©faut)**  

```tsx filename="app/page.tsx" copy
async function getData() {
  const res = await fetch("https://jsonplaceholder.typicode.com/posts/1");
  const data = await res.json();
  return data;
}

export default async function Home() {
  const post = await getData();

  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.body}</p>
    </div>
  );
}
```
âœ… **Ce composant est exÃ©cutÃ© uniquement sur le serveur** et le client **ne charge aucun JavaScript** pour afficher le contenu.  

---

## **2ï¸âƒ£ Quâ€™est-ce quâ€™un Client Component ? (`'use client'`)**  

ğŸ“Œ Un **Client Component** est un composant React classique qui sâ€™exÃ©cute dans le navigateur.  
ğŸ“Œ âš¡ **NÃ©cessaire si** :  
- Le composant utilise un **state (`useState`)** ou un effet (`useEffect`).  
- Il y a des **interactions utilisateur** (clicks, formulairesâ€¦).  
- Il utilise des **events handlers** (`onClick`, `onChange`, etc.).  

ğŸ“ **Exemple de Client Component**  

```tsx filename="app/components/Counter.tsx" copy
"use client"; // Obligatoire pour un Client Component

import { useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>Compteur : {count}</p>
      <button onClick={() => setCount(count + 1)}>IncrÃ©menter</button>
    </div>
  );
}
```
âœ… **Ce composant fonctionne uniquement cÃ´tÃ© client** et peut Ãªtre utilisÃ© dans un **Server Component**.  

---

## **3ï¸âƒ£ Comment mÃ©langer Server et Client Components ?**  

ğŸ“Œ **On peut insÃ©rer un Client Component dans un Server Component**, mais **pas lâ€™inverse** !  

ğŸ“ **Exemple : Un Server Component qui intÃ¨gre un Client Component**  

```tsx filename="app/page.tsx" copy
import Counter from "./components/Counter"; // Client Component

export default function Home() {
  return (
    <div>
      <h1>Bienvenue</h1>
      <Counter />
    </div>
  );
}
```
âœ… **Seul `Counter.tsx` est chargÃ© cÃ´tÃ© client**, **tout le reste est statique** et optimisÃ© par Next.js.  

---

## **4ï¸âƒ£ DiffÃ©rences entre Server et Client Components**  

| âš¡ **CritÃ¨re** | ğŸŒ **Server Components (par dÃ©faut)** | ğŸ–¥ **Client Components (`use client`)** |
|--------------|--------------------------------|----------------------------|
| ExÃ©cutÃ© sur | **Serveur** | **Navigateur** |
| Envoi du JS au client ? | âŒ Non | âœ… Oui |
| Peut utiliser `useState` et `useEffect` ? | âŒ Non | âœ… Oui |
| Peut appeler directement une base de donnÃ©es ? | âœ… Oui | âŒ Non |
| Peut contenir des events (`onClick`, `onChange`) ? | âŒ Non | âœ… Oui |
| Rendu optimisÃ© | âœ… Oui (SSR & streaming) | âŒ Non (hydration cÃ´tÃ© client) |

---

## **5ï¸âƒ£ Cas dâ€™usage : Quand utiliser lâ€™un ou lâ€™autre ?**  

âœ… **Utiliser des Server Components quand** :  
- On veut **Ã©viter dâ€™envoyer du JavaScript au client**.  
- On rÃ©cupÃ¨re des **donnÃ©es dynamiques** (API, base de donnÃ©es).  
- On veut bÃ©nÃ©ficier du **streaming** pour afficher progressivement le contenu.  

âœ… **Utiliser des Client Components quand** :  
- On a **des Ã©tats (`useState`)** ou des **effets (`useEffect`)**.  
- On a des **Ã©vÃ©nements utilisateur (`onClick`, `onChange`)**.  
- On utilise des **bibliothÃ¨ques interactives** comme **Framer Motion, Recharts**â€¦  

---

## **ğŸ¯ Conclusion : Pourquoi cette approche hybride ?**  

âœ… **Meilleure performance** â†’ Moins de JavaScript cÃ´tÃ© client.  
âœ… **Meilleure UX** â†’ Rendu rapide et progressif (streaming).  
âœ… **Plus de sÃ©curitÃ©** â†’ Les appels API et base de donnÃ©es restent **cachÃ©s** du client.  