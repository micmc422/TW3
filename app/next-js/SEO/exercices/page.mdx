# üìå **Exercice : Optimisation SEO avec Next.js**  

## **üéØ Objectif**  
Mettre en place les bonnes pratiques <Term word="SEO">SEO</Term> dans une application <Term word="Next.js">Next.js</Term> en travaillant sur les **m√©tadonn√©es**, **les Open Graph & Twitter Cards**, et la **g√©n√©ration d‚Äôun sitemap et d‚Äôun robots.txt**.  

üîó **Code source :** [üìÇ GitHub](https://github.com/micmc422/my-next-app.git) üöÄ

---

## **üõ† √âtape 1 : D√©finir les m√©tadonn√©es SEO**  

### **1Ô∏è‚É£ Ajouter des m√©tadonn√©es globales dans `layout.tsx`**  
- Ouvrez le fichier `app/layout.tsx`  
- Ajoutez un objet `metadata` avec les informations suivantes :  
  - `title` : Nom du site  
  - `description` : Une courte description du site  
  - `keywords` : Liste de mots-cl√©s  

üìå **Exemple :**  
```tsx filename="app/layout.tsx" copy
export const metadata = {
  title: "Mon Super Site",
  description: "D√©couvrez des articles passionnants sur le d√©veloppement web.",
  keywords: ["next.js", "seo", "d√©veloppement web"],
};
```
- Lancez le projet et inspectez la page avec les DevTools (`F12` > `Elements` > `head`) pour v√©rifier que les balises `<title>` et `<meta>` sont bien g√©n√©r√©es.  

---

### **2Ô∏è‚É£ Ajouter des m√©tadonn√©es dynamiques avec `generateMetadata()`**  
- Dans `app/blog/[id]/page.tsx`, cr√©ez une fonction `generateMetadata()` pour g√©n√©rer un titre et une description unique pour chaque article de blog.  

üìå **Exemple :**  
```tsx filename="app/blog/[id]/page.tsx" copy
import { notFound } from "next/navigation";

export async function getPostBySlug(id: string) {
    const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`);

    if (!response.ok) {
        notFound()
    }

    const post = await response.json();

    return {
        title: post.title,
        excerpt: post.body.substring(0, 150) + "...", // Prend les 150 premiers caract√®res du contenu
        content: post.body,
        image: `https://via.placeholder.com/600x400?text=${encodeURIComponent(post.title)}`, // Image g√©n√©r√©e
    };
}

export async function generateMetadata({ params }: { params: { id: string } }) {
    const post = await getPostBySlug((await params).id); // Fonction fictive r√©cup√©rant un article
    return {
        title: post.title,
        description: post.excerpt,
    };
}

export default async function PostPage({ params }: { params: { id: string } }) {
    const post = await getPostBySlug((await params).id); // Fonction fictive r√©cup√©rant un article

    return <div>
        <h1>{post.title}</h1>
    </div>
}
```
- Ouvrez un article dans le navigateur et v√©rifiez que le titre change bien en fonction du contenu du blog.

---

## **üñº √âtape 2 : Ajouter Open Graph et Twitter Cards**  

- Modifiez `generateMetadata()` pour inclure des balises **Open Graph** et **Twitter Cards** avec une <Term word="image">image</Term> de partage.

üìå **Exemple :**  
```tsx filename="app/blog/[id]/page.tsx" copy
export async function generateMetadata({ params }) {
  const post = await getPostBySlug(params.id);
  return {
    title: post.title,
    description: post.excerpt,
    openGraph: {
      title: post.title,
      description: post.excerpt,
      images: [{ url: `https://via.placeholder.com/600x400?text=${encodeURIComponent(post.title)}` }],
      type: "article",
    },
    twitter: {
      card: "summary_large_image",
      title: post.title,
      description: post.excerpt,
      images: [`https://via.placeholder.com/600x400?text=${encodeURIComponent(post.title)}`],
    },
  };
}
```
- Testez les balises g√©n√©r√©es avec l'outil [Meta Tags](https://metatags.io/) ou l'outil [Sharing Debugger](https://developers.facebook.com/tools/debug/).

---

## **üó∫ √âtape 3 : G√©n√©rer un sitemap et un robots.txt**  

### **1Ô∏è‚É£ G√©n√©rer un `sitemap.xml` dynamique**  
- Dans `app/sitemap.ts`, cr√©ez un sitemap listant dynamiquement toutes les pages du blog.  

üìå **Exemple :**  
```tsx filename="app/sitemap.ts" copy
export async function getAllPosts() {
  const response = await fetch("https://jsonplaceholder.typicode.com/posts");

  if (!response.ok) {
    throw new Error("Impossible de r√©cup√©rer les articles");
  }

  const posts = await response.json();

  return posts.map((post) => ({
    slug: post.id.toString(), // JSONPlaceholder utilise des IDs num√©riques
    updatedAt: new Date().toISOString(), // Simule une date de mise √† jour
  }));
}

export default async function sitemap() {
  const posts = await getAllPosts();

  return posts.map((post) => ({
    url: `https://example.com/blog/${post.slug}`,
    lastModified: post.updatedAt,
  }));
}
```
- V√©rifiez que votre sitemap fonctionne en visitant `http://localhost:3000/sitemap.xml`.

---

### **2Ô∏è‚É£ Ajouter un `robots.txt`**  
- Dans le dossier `public/`, ajoutez un fichier `robots.txt` avec les directives suivantes :  

üìå **Exemple :**  
```
User-agent: *
Allow: /
Sitemap: https://example.com/sitemap.xml
```
- V√©rifiez le fichier en acc√©dant √† `http://localhost:3000/robots.txt`.

---

## **‚úÖ Validation finale**  
1. **V√©rifier les m√©tadonn√©es SEO** avec Lighthouse (Chrome DevTools > Audits > SEO).  
2. **Tester Open Graph et Twitter Cards** avec [Meta Tags](https://metatags.io/).  
3. **S'assurer que `sitemap.xml` et `robots.txt` sont bien accessibles** dans le navigateur.  

üöÄ **F√©licitations ! Votre site Next.js est maintenant optimis√© pour le SEO.**