import { Callout } from 'nextra/components'

# âš¡ **Comparatif entre `app/` et `pages/` dans Next.js**

Depuis Next.js 13, un **nouveau systÃ¨me de routage** appelÃ© **App Router (`app/`)** est introduit, en remplacement progressif du **Pages Router (`pages/`)**. Voici un comparatif dÃ©taillÃ© entre ces deux approches, basÃ© sur la gestion des fichiers et des fonctionnalitÃ©s.  

---

## ğŸ“ **Structure des fichiers : Pages Router (`pages/`) vs App Router (`app/`)**  

La structure des fichiers entre ces deux approches diffÃ¨re principalement dans lâ€™organisation des routes et la gestion des layouts.  

### ğŸ‘ **Ancienne approche (`pages/`)**  

Dans le systÃ¨me `pages/`, chaque fichier correspondait directement Ã  une route :  

```
/pages
 â”œâ”€â”€ index.js         // Page d'accueil ("/")
 â”œâ”€â”€ about.js         // Page "/about"
 â”œâ”€â”€ contact.js       // Page "/contact"
 â”œâ”€â”€ _app.js          // Layout global (appliquÃ© partout)
 â”œâ”€â”€ _document.js     // Personnalisation de la structure HTML
 â”œâ”€â”€ api/             // API Routes
 â”‚   â”œâ”€â”€ hello.js     // API: "/api/hello"
```

### ğŸ‘ **Nouvelle approche (`app/`)**  

Avec `app/`, le routing est **basÃ© sur les dossiers**, et lâ€™utilisation des **Server Components** optimise les performances :  

```
/app
 â”œâ”€â”€ layout.tsx       // Layout global
 â”œâ”€â”€ page.tsx         // Page d'accueil ("/")
 â”œâ”€â”€ about/
 â”‚   â”œâ”€â”€ page.tsx     // Page "/about"
 â”‚   â”œâ”€â”€ legal.md     // Exemple de contenu markdown
 â”œâ”€â”€ contact/
 â”‚   â”œâ”€â”€ page.tsx     // Page "/contact"
 â”œâ”€â”€ api/             // API Routes remplacÃ©es par Server Actions
```
<Callout emoji="â¡" type='info'>
 **Remarque :** `layout.tsx` est appliquÃ© automatiquement aux sous-pages sans avoir besoin de `_app.js` comme dans `pages/`.  
</Callout>

## ğŸ› ï¸ **Principales diffÃ©rences entre `pages/` et `app/`**  

| FonctionnalitÃ©           | Pages Router (`pages/`) | App Router (`app/`) |
|-------------------------|------------------------|----------------------|
| **Routing**             | BasÃ© sur les fichiers  | BasÃ© sur les dossiers |
| **Layouts**            | `_app.js` global       | `layout.tsx` par dossier |
| **Data Fetching**      | `getStaticProps`, `getServerSideProps` | Fetching natif dans Server Components |
| **Composants par dÃ©faut** | Client Components    | Server Components (par dÃ©faut) |
| **Gestion des API**    | API Routes (`/api/*`)  | Server Actions (via formulaires et mutations) |
| **SEO (Metadata)**     | `next/head`            | `generateMetadata()` |

---

## ğŸš€ **Avantages de lâ€™App Router (`app/`)**  

âœ… **Meilleures performances** grÃ¢ce aux **Server Components** (moins de JavaScript envoyÃ© au client).  
âœ… **Layouts plus flexibles** (possibilitÃ© dâ€™avoir des layouts imbriquÃ©s par dossier).  
âœ… **SEO et mÃ©tadonnÃ©es simplifiÃ©s** avec `generateMetadata()`.  
âœ… **Suppression des API Routes** au profit des **Server Actions**, qui permettent dâ€™interagir directement avec une base de donnÃ©es depuis un composant.  
âœ… **Gestion simplifiÃ©e des erreurs et du chargement** (`loading.tsx` et `error.tsx` par dossier).  

---

### ğŸ¯ **Conclusion**  

Si vous dÃ©marrez un projet aujourdâ€™hui, **lâ€™App Router (`app/`) est recommandÃ©** pour bÃ©nÃ©ficier des derniÃ¨res avancÃ©es en termes de performance et dâ€™architecture. Toutefois, **le Pages Router (`pages/`) reste toujours supportÃ©** et peut Ãªtre utile pour une transition progressive.  

Tu veux un exemple de code concret pour mieux illustrer la diffÃ©rence entre les deux ? ğŸ˜Š