---
description: "Node.js permet de crÃ©er facilement des serveurs HTTP grÃ¢ce Ã  son module intÃ©grÃ© http. Ce module permet de recevoir des requÃªtes et d'envoyer des rÃ©ponses via le protocole HTTP, qui est Ã  la base du fonctionnement des sites web."
---
import { Steps } from 'nextra/components'

# ğŸŸ© **Node.js et serveur HTTP** (25 minutes)

## ğŸŒ CrÃ©er un serveur HTTP simple
<Term word="Node.js">Node.js</Term> permet de crÃ©er facilement des serveurs <Term word="HTTP">HTTP</Term> grÃ¢ce Ã  son module intÃ©grÃ© **`http`**. Ce module permet de recevoir des requÃªtes et d'envoyer des rÃ©ponses via le protocole HTTP, qui est Ã  la base du fonctionnement des sites web.
<Steps>

### âš™ï¸ Utiliser le module `http` pour crÃ©er un serveur

Le module `http` permet de dÃ©finir un serveur capable de rÃ©pondre aux requÃªtes des clients (navigateurs, outils comme Postman, etc.). Voici un exemple de serveur HTTP minimaliste avec Node.js :

```javascript copy
const http = require('http');

const server = http.createServer((req, res) => {
  // DÃ©finir la rÃ©ponse HTTP
  res.statusCode = 200; // Code de statut (200 = succÃ¨s)
  res.setHeader('Content-Type', 'text/plain'); // Type de contenu de la rÃ©ponse
  res.end('Hello, welcome to my Node.js server!\n'); // Message de rÃ©ponse
});

// Le serveur Ã©coute sur le port 3000
server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Ce serveur Ã©coute sur le **port 3000**. Lorsque vous accÃ©dez Ã  `http://localhost:3000/` via un navigateur ou un client HTTP, le serveur rÃ©pondra avec "Hello, welcome to my Node.js server!".

### ğŸ”„ Gestion des requÃªtes et rÃ©ponses HTTP

Dans cet exemple, `req` reprÃ©sente la **requÃªte** du client (c'est-Ã -dire les informations envoyÃ©es par le navigateur ou autre), et `res` reprÃ©sente la **rÃ©ponse** que le serveur renverra. Chaque requÃªte peut contenir des informations comme la mÃ©thode HTTP utilisÃ©e (GET, POST, etc.), l'<Term word="URL">URL</Term>, et les en-tÃªtes.

ğŸ§ª Exemple avec des dÃ©tails supplÃ©mentaires sur la requÃªte et la rÃ©ponse :

```javascript copy
const server = http.createServer((req, res) => {
  console.log(`Received a ${req.method} request for: ${req.url}`);

  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end(`Hello! You've requested ${req.url} using ${req.method}`);
});
```
</Steps>
## ğŸ›¤ï¸ Routage basique

Le **routage** consiste Ã  dÃ©finir des actions spÃ©cifiques en fonction de l'URL demandÃ©e. Cela permet de crÃ©er des pages et des services diffÃ©rents en fonction des besoins des utilisateurs.
<Steps>
### ğŸ—ºï¸ ImplÃ©menter une gestion de routes basique avec Node.js

Vous pouvez utiliser la propriÃ©tÃ© `req.url` pour vÃ©rifier l'URL demandÃ©e par le client et exÃ©cuter diffÃ©rentes actions en fonction de cette URL. Voici un exemple simple de routage :

```javascript copy
const server = http.createServer((req, res) => {
  if (req.url === '/') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the homepage!\n');
  } else if (req.url === '/about') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('This is the about page.\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Dans cet exemple, lorsque vous accÃ©dez Ã  `http://localhost:3000/`, le serveur renvoie un message d'accueil, et pour `http://localhost:3000/about`, il affiche une page "Ã€ propos". Pour toute autre URL, il affiche une page 404 (page non trouvÃ©e).

### ğŸ§ª GÃ©rer diffÃ©rentes mÃ©thodes HTTP (GET, POST)

Node.js permet Ã©galement de gÃ©rer diffÃ©rentes mÃ©thodes HTTP comme `GET`, `POST`, `PUT`, et `DELETE`. Voici un exemple qui diffÃ©rencie les mÃ©thodes `GET` et `POST` :

```javascript copy
const server = http.createServer((req, res) => {
  if (req.url === '/' && req.method === 'GET') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the GET homepage!\n');
  } else if (req.url === '/' && req.method === 'POST') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the POST homepage!\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Dans cet exemple, le serveur rÃ©pond diffÃ©remment selon la mÃ©thode HTTP utilisÃ©e (GET ou POST). Cela permet d'implÃ©menter des comportements variÃ©s selon les actions effectuÃ©es par l'utilisateur.
</Steps>
## ğŸ“ Exercice pratique

CrÃ©ez un serveur HTTP qui gÃ¨re deux routes simples :
- La route `/` ğŸ  doit afficher un message de bienvenue.
- La route `/about` â„¹ï¸ doit afficher une page "Ã€ propos".

ğŸ§ª Exemple de solution :

```javascript copy
const http = require('http');

const server = http.createServer((req, res) => {
  if (req.url === '/') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the homepage!\n');
  } else if (req.url === '/about') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('This is the about page.\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```
