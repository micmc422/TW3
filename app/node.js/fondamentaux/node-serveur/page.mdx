---
description: "Node.js permet de cr√©er facilement des serveurs HTTP gr√¢ce √† son module int√©gr√© http. Ce module permet de recevoir des requ√™tes et d'envoyer des r√©ponses via le protocole HTTP, qui est √† la base du fonctionnement des sites web."
---
import { Steps } from 'nextra/components'

# üü© **Node.js et serveur HTTP** (25 minutes)

## üåê Cr√©er un serveur HTTP simple
Node.js permet de cr√©er facilement des serveurs HTTP gr√¢ce √† son module int√©gr√© **`http`**. Ce module permet de recevoir des requ√™tes et d'envoyer des r√©ponses via le protocole HTTP, qui est √† la base du fonctionnement des sites web.
<Steps>

### ‚öôÔ∏è Utiliser le module `http` pour cr√©er un serveur

Le module `http` permet de d√©finir un serveur capable de r√©pondre aux requ√™tes des clients (navigateurs, outils comme Postman, etc.). Voici un exemple de serveur HTTP minimaliste avec Node.js :

```javascript copy
const http = require('http');

const server = http.createServer((req, res) => {
  // D√©finir la r√©ponse HTTP
  res.statusCode = 200; // Code de statut (200 = succ√®s)
  res.setHeader('Content-Type', 'text/plain'); // Type de contenu de la r√©ponse
  res.end('Hello, welcome to my Node.js server!\n'); // Message de r√©ponse
});

// Le serveur √©coute sur le port 3000
server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Ce serveur √©coute sur le **port 3000**. Lorsque vous acc√©dez √† `http://localhost:3000/` via un navigateur ou un client HTTP, le serveur r√©pondra avec "Hello, welcome to my Node.js server!".

### üîÑ Gestion des requ√™tes et r√©ponses HTTP

Dans cet exemple, `req` repr√©sente la **requ√™te** du client (c'est-√†-dire les informations envoy√©es par le navigateur ou autre), et `res` repr√©sente la **r√©ponse** que le serveur renverra. Chaque requ√™te peut contenir des informations comme la m√©thode HTTP utilis√©e (GET, POST, etc.), l'URL, et les en-t√™tes.

Exemple avec des d√©tails suppl√©mentaires sur la requ√™te et la r√©ponse :

```javascript copy
const server = http.createServer((req, res) => {
  console.log(`Received a ${req.method} request for: ${req.url}`);

  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end(`Hello! You've requested ${req.url} using ${req.method}`);
});
```
</Steps>
## üõ§Ô∏è Routage basique

Le **routage** consiste √† d√©finir des actions sp√©cifiques en fonction de l'URL demand√©e. Cela permet de cr√©er des pages et des services diff√©rents en fonction des besoins des utilisateurs.
<Steps>
### üó∫Ô∏è Impl√©menter une gestion de routes basique avec Node.js

Vous pouvez utiliser la propri√©t√© `req.url` pour v√©rifier l'URL demand√©e par le client et ex√©cuter diff√©rentes actions en fonction de cette URL. Voici un exemple simple de routage :

```javascript copy
const server = http.createServer((req, res) => {
  if (req.url === '/') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the homepage!\n');
  } else if (req.url === '/about') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('This is the about page.\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Dans cet exemple, lorsque vous acc√©dez √† `http://localhost:3000/`, le serveur renvoie un message d'accueil, et pour `http://localhost:3000/about`, il affiche une page "√Ä propos". Pour toute autre URL, il affiche une page 404 (page non trouv√©e).

### G√©rer diff√©rentes m√©thodes HTTP (GET, POST)

Node.js permet √©galement de g√©rer diff√©rentes m√©thodes HTTP comme `GET`, `POST`, `PUT`, et `DELETE`. Voici un exemple qui diff√©rencie les m√©thodes `GET` et `POST` :

```javascript copy
const server = http.createServer((req, res) => {
  if (req.url === '/' && req.method === 'GET') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the GET homepage!\n');
  } else if (req.url === '/' && req.method === 'POST') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the POST homepage!\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

Dans cet exemple, le serveur r√©pond diff√©remment selon la m√©thode HTTP utilis√©e (GET ou POST). Cela permet d'impl√©menter des comportements vari√©s selon les actions effectu√©es par l'utilisateur.
</Steps>
## üìù Exercice pratique

Cr√©ez un serveur HTTP qui g√®re deux routes simples :
- La route `/` üè† doit afficher un message de bienvenue.
- La route `/about` ‚ÑπÔ∏è doit afficher une page "√Ä propos".

Exemple de solution :

```javascript copy
const http = require('http');

const server = http.createServer((req, res) => {
  if (req.url === '/') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Welcome to the homepage!\n');
  } else if (req.url === '/about') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('This is the about page.\n');
  } else {
    res.statusCode = 404;
    res.setHeader('Content-Type', 'text/plain');
    res.end('404 - Page not found\n');
  }
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```
