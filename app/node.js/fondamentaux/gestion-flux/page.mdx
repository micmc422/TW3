---
description: "Dans cette section, nous explorerons comment Node.js gÃ¨re les fichiers et les flux de donnÃ©es. Le module fs (File System) permet de lire et Ã©crire des fichiers, tandis que les flux (streams) permettent de traiter efficacement de grandes quantitÃ©s de donnÃ©es de maniÃ¨re asynchrone."
---
# ğŸŸ© **Gestion des fichiers et des flux en Node.js**

Dans cette section, nous explorerons comment Node.js gÃ¨re les fichiers et les flux de donnÃ©es. Le module `fs` (File System) permet de lire et Ã©crire des fichiers, tandis que les flux (`streams`) permettent de traiter efficacement de grandes quantitÃ©s de donnÃ©es de maniÃ¨re asynchrone.

## ğŸ“‚ Lire et Ã©crire des fichiers

Le module `fs` de Node.js fournit une interface pour interagir avec le systÃ¨me de fichiers, permettant de lire, Ã©crire, supprimer, et manipuler des fichiers. Voici un exemple de lecture et dâ€™Ã©criture de fichiers avec le module `fs`.

### ğŸ“– Lecture dâ€™un fichier
  ```javascript copy
  const fs = require('fs');

  fs.readFile('exemple.txt', 'utf8', (err, data) => {
    if (err) {
      console.error('Erreur lors de la lecture du fichier :', err);
      return;
    }
    console.log('Contenu du fichier :', data);
  });
  ```
  Ici, `fs.readFile` lit un fichier de maniÃ¨re asynchrone. Si une erreur survient (par exemple, si le fichier n'existe pas), elle est capturÃ©e et affichÃ©e.

### âœï¸ Ã‰criture dans un fichier
  ```javascript copy
  const fs = require('fs');

  const contenu = 'Ceci est un exemple de texte.';
  fs.writeFile('exemple.txt', contenu, (err) => {
    if (err) {
      console.error('Erreur lors de l\'Ã©criture du fichier :', err);
      return;
    }
    console.log('Fichier Ã©crit avec succÃ¨s !');
  });
  ```
  Avec `fs.writeFile`, vous pouvez Ã©crire des donnÃ©es dans un fichier. Si le fichier n'existe pas, il est crÃ©Ã©. Sinon, il est remplacÃ©.

## ğŸ”„ Gestion des flux et buffers

**Les flux (`streams`)** sont des abstractions pour lire ou Ã©crire des donnÃ©es par petits morceaux, au lieu de charger la totalitÃ© en mÃ©moire. Cela est particuliÃ¨rement utile pour les gros fichiers ou les transferts de donnÃ©es en continu.

Il existe quatre types de flux en Node.js :
1. **Readable** (lecture)
2. **Writable** (Ã©criture)
3. **Duplex** (lecture et Ã©criture simultanÃ©es)
4. **Transform** (modification des donnÃ©es pendant le transfert)

Voici un exemple de lecture et d'Ã©criture de fichier en utilisant des flux (`streams`):

- **Lecture avec flux (`streams`)** ğŸ“¥ :
  ```javascript copy
  const fs = require('fs');

  const readStream = fs.createReadStream('grosFichier.txt', 'utf8');
  readStream.on('data', (chunk) => {
    console.log('Nouveau morceau de donnÃ©es :', chunk);
  });
  readStream.on('end', () => {
    console.log('Lecture du fichier terminÃ©e.');
  });
  readStream.on('error', (err) => {
    console.error('Erreur lors de la lecture du fichier :', err);
  });
  ```

- **Ã‰criture avec flux (`streams`)** ğŸ“¤ :
  ```javascript copy
  const fs = require('fs');

  const writeStream = fs.createWriteStream('nouveauFichier.txt');
  writeStream.write('PremiÃ¨re ligne\n');
  writeStream.write('DeuxiÃ¨me ligne\n');
  writeStream.end('Fin du fichier');
  writeStream.on('finish', () => {
    console.log('Ã‰criture terminÃ©e !');
  });
  writeStream.on('error', (err) => {
    console.error('Erreur lors de l\'Ã©criture :', err);
  });
  readStream.on('end', () => {
    console.log('Lecture du fichier terminÃ©e.');
  });
  readStream.on('error', (err) => {
    console.error('Erreur lors de la lecture du fichier :', err);
  });
  ```


ğŸ‘‰ **Astuce** : Depuis Node.js 10+, vous pouvez aussi utiliser les promesses avec `fs.promises` pour une gestion asynchrone plus moderne (ex : `await fs.promises.readFile('exemple.txt', 'utf8')`).

**Les buffers** sont des zones de mÃ©moire brute allouÃ©es pour stocker des donnÃ©es binaires, souvent utilisÃ©es lors de la manipulation de flux.

### ğŸ§Š Utilisation dâ€™un buffer

  ```javascript copy
  const buffer = Buffer.from('Bonjour');
  console.log(buffer);  // <Buffer 42 6f 6e 6a 6f 75 72>
  console.log(buffer.toString());  // 'Bonjour'
  ```

---

## ğŸ“ TL;DR

- Utilisez le module `fs` pour lire/Ã©crire des fichiers de faÃ§on simple.
- Les flux (`streams`) permettent de traiter de gros fichiers sans tout charger en mÃ©moire.
- Les buffers servent Ã  manipuler des donnÃ©es binaires.
- PrivilÃ©giez les mÃ©thodes asynchrones pour de meilleures performances.
